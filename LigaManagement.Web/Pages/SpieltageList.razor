@page "/spieltage/{SpieltagNr}"
@inherits LigaManagerManagement.Web.Pages.SpieltagListBase

@attribute [Authorize]

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
</head>
<style type="text/css">

    body {
        font-size: 18px !important;
    }

    @@media screen and (max-width: 767px) {

        .priority-1 {
            display: inline-block;
        }

        .priority-2 {
            display: none;
        }
    }

    .NewBtn {
        gap: 1px;
        margin-right: 2px;
        align-self: end;
        justify-content: end;
        margin-right: 0px !important;
    }

    a {
        text-decoration: none;
        display: inline-block;
        padding: 8px 16px;
    }

        a:hover {
            background-color: #ddd;
            color: black;
        }

    .previous {
        background-color: #1b6ec2;
        border-color: #1861ac;
        color: white;
    }

    .next {
        background-color: #1b6ec2;
        border-color: #1861ac;
        color: white;
    }

    .round {
        border-radius: 50%;
    }

    /* table:first-child {
            border-top: 2px solid
        } */

</style>
@if (Spieltage == null)
{
    <div class="spinner"></div>
}
else
{
    <div class="container">
        <div class="form-group row">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-body">
                        <h2>@Ligamanager.Components.Globals.currentLiga @Ligamanager.Components.Globals.currentSaison </h2>
                        <select id="cboSpieltage" data-toggle="tooltip" title="Spieltag auswählen" style="height:38px; width:180px; display:inline-block;" class="form-control" @onchange="SpieltagChange">
                            <option value="" selected>@SpieltagNr.ToString() .Spieltag</option>
                            @foreach (var spieltag in SpieltagList)
                            {
                                <option value="@spieltag.Nummer"> @spieltag.Name</option>
                            }
                        </select>
                        <span class="ml-3">
                            @if (VisibleBtnNew)
                            {
                                <NavLink href="@($"createspieltag/{SpieltagNr}")" class="btn-primary btn"><span class="glyphicon glyphicon-plus-sign"></span></NavLink>

                                @* <a href="@($"createspieltag/{SpieltagNr}")" class="btn btn-info btn-sm">
                        <span class="glyphicon glyphicon-plus"></span>
                        </a> *@
                            }
                            else
                            {
                                <NavLink href="@($"createspieltag/{SpieltagNr}")" style="display:none;" class="btn-primary btn"><span class="glyphicon">&#x2b;</span></NavLink>
                                @* <a href="@($"createspieltag/{SpieltagNr}")" style="display:none;" class="btn btn-info btn-sm">
                        <span class="glyphicon glyphicon-plus"></span>
                        </a> *@
                            }
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-sm-12">
                @{
                    int Zaehler = 1;
                }

                @if (Spieltage.Count() > 0)
                {
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th style="max-height:38px; width:180px;pointer-events:none;" class="TableElement priority-1">V1</th>
                                <th style="max-height:38px; width:40px; pointer-events:none;" class="TableElement priority-1">T1</th>
                                <th style="max-height:38px; width:40px; pointer-events:none;" class="TableElement priority-1">T2</th>
                                <th style="max-height:38px; width:180px;pointer-events:none;" class="TableElement priority-1">V2</th>
                                <th style="max-height:38px; width:280px;pointer-events:none;" class="TableElement priority-1">Ort</th>
                                <th style="max-height:38px; width:120px;pointer-events:none;" class="TableElement priority-1">Datum</th>
                                <th style="max-height:38px; width:100px;pointer-events:none;" class="TableElement priority-1">Zuschauer</th>
                            </tr>
                        </thead>
                    </table>
                }                

                @foreach (var spieltag in Spieltage.OrderBy(o => o.Datum).ToList())
                {
                    <EditForm Model="@Spieltage">
                        <!-- This will validate the form -->
                        <DataAnnotationsValidator />
                        <!-- This will show any validation errors -->
                        <DisplaySpieltag Zaehler=Zaehler Spieltag="spieltag"></DisplaySpieltag>
                    </EditForm>

                    Zaehler = Zaehler + 1;
                }
            </div>
        </div>
    </div>
    <br />
    @if (VisibleVorZurueck)
    {
        <div class="form-group row">
            <div class="col-sm-10">
                <a type="button" data-toggle="tooltip" title="Voriger Spieltag" @onclick="SpieltagZurueck" class="previous round">&laquo;</a>
            </div>
            <div class="col-sm-2 justify-content-end">
                <a type="button" data-toggle="tooltip" title="Nächster Spieltag" @onclick="SpieltagVor" style="width: auto;" class="next round">&raquo;</a>
            </div>
        </div>
    }

}